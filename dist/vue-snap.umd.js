!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("seamless-scroll-polyfill/dist/esm/Element.scrollBy"),require("lodash/debounce")):"function"==typeof define&&define.amd?define(["exports","seamless-scroll-polyfill/dist/esm/Element.scrollBy","lodash/debounce"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueSnap={},e.Element_scrollBy,e._.debounce)}(this,(function(e,t,s){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=i(s),r=function(e,t,s){return Math.abs(e-t)<=s},o="undefined"==typeof window,l=!o;o||"scrollBehavior"in document.documentElement.style||t.elementScrollByPolyfill();function a(e,t,s,i,n,r,o,l,a,d){"boolean"!=typeof o&&(a=l,l=o,o=!1);const c="function"==typeof s?s.options:s;let u;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,n&&(c.functional=!0)),i&&(c._scopeId=i),r?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=u):t&&(u=o?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),u)if(c.functional){const e=c.render;c.render=function(t,s){return u.call(s),e(t,s)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,u):[u]}return s}const d={props:{hideArrows:{type:Boolean,default:!1},hideArrowsOnBound:{type:Boolean,default:!1},hideDots:{type:Boolean,default:!1},tag:{type:String,default:"ul"},i18n:{type:Object,default:()=>({slideLeft:"Slide left",slideRight:"Slide right"}),validator:e=>["slideLeft","slideRight"].every(t=>t in e)}},data:()=>({boundLeft:!0,boundRight:!1,slidesWidth:[],wrapperScrollWidth:0,wrapperVisibleWidth:0,currentPage:0,previousPage:0,currentPos:0,step:1,observer:null,onResizeFn:null,onScrollFn:null}),computed:{dotsCount(){return this.slidesWidth.length}},watch:{currentPage(e,t){e!==t&&this.$emit("page",{currentPage:e,previousPage:t})},boundLeft(e){e&&this.$emit("bound-left",!0)},boundRight(e){e&&this.$emit("bound-right",!0)}},mounted(){this.calcOnInit(),l&&(this.onResizeFn=n.default(this.calcOnInit,410),this.onScrollFn=n.default(this.calcOnScroll,100),this.attachMutationObserver(),this.$refs.vsWrapper.addEventListener("scroll",this.onScrollFn),window.addEventListener("resize",this.onResizeFn,!1),this.$on("go-to-page",e=>this.goToSlide(e)),this.$emit("mounted",!0))},beforeDestroy(){l&&(this.observer.disconnect(),this.$refs.vsWrapper.removeEventListener("scroll",this.onScrollFn),window.removeEventListener("resize",this.onResizeFn,!1))},methods:{calcOnInit(){this.$refs.vsWrapper&&(this.calcWrapperWidth(),this.calcSlidesWidth(),this.calcCurrentPosition(),this.setCurrentPage(),this.calcBounds())},calcOnScroll(){this.$refs.vsWrapper&&(this.calcCurrentPosition(),this.setCurrentPage(),this.calcBounds())},calcBounds(){const e=r(this.currentPos,0,5),t=r(this.wrapperScrollWidth-this.wrapperVisibleWidth,this.currentPos,5);this.boundLeft=!!e,this.boundRight=!!t},calcWrapperWidth(){this.wrapperScrollWidth=this.$refs.vsWrapper.scrollWidth,this.wrapperVisibleWidth=this.$refs.vsWrapper.offsetWidth},calcSlidesWidth(){const e=[...this.$refs.vsWrapper.children];this.slidesWidth=e.map(e=>({offsetLeft:e.offsetLeft,width:e.offsetWidth}))},getCurrentPage(){return r(this.currentPos+this.wrapperVisibleWidth,this.wrapperScrollWidth,5)?this.slidesWidth.length-1:this.slidesWidth.findIndex(e=>r(e.offsetLeft,this.currentPos,5))},setCurrentPage(e){const t=void 0!==e?e:this.getCurrentPage();t<0||(this.previousPage=this.currentPage,this.currentPage=t>0?t:0)},calcCurrentPosition(){this.currentPos=this.$refs.vsWrapper.scrollLeft||0},attachMutationObserver(){this.observer=new MutationObserver(()=>{this.calcOnInit()}),this.observer.observe(this.$refs.vsWrapper,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},changeSlide(e){this.goToSlide(this.currentPage+e)},goToSlide(e){this.slidesWidth[e]&&(this.$refs.vsWrapper.scrollTo({left:this.slidesWidth[e].offsetLeft,behavior:"smooth"}),this.setCurrentPage(e))}}};var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vs-carousel"},[s(e.tag,{ref:"vsWrapper",tag:"component",staticClass:"vs-carousel__wrapper"},[e._t("default")],2),e._v(" "),e.hideArrows?e._e():e._t("arrows",[s("button",{directives:[{name:"show",rawName:"v-show",value:!e.hideArrowsOnBound||!e.boundLeft,expression:"hideArrowsOnBound ? !boundLeft : true"}],staticClass:"\n        vs-carousel__arrows\n        vs-carousel__arrows--left\n      ",attrs:{type:"button","aria-label":e.i18n.slideLeft,disabled:e.boundLeft},on:{click:function(t){return e.changeSlide(-1)}}},[e._v("\n      ←\n    ")]),e._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.hideArrowsOnBound||!e.boundRight,expression:"hideArrowsOnBound ? !boundRight : true"}],staticClass:"\n        vs-carousel__arrows\n        vs-carousel__arrows--right\n      ",attrs:{type:"button","aria-label":e.i18n.slideRight,disabled:e.boundRight},on:{click:function(t){return e.changeSlide(1)}}},[e._v("\n      →\n    ")])],{changeSlide:e.changeSlide,boundLeft:e.boundLeft,boundRight:e.boundRight}),e._v(" "),e.hideDots?e._e():e._t("dots",[s("ol",{staticClass:"vs-carousel__dots",attrs:{"aria-label":e.i18n.paginationNavigation}},[e._v("\n    >\n      "),e._l(e.dotsCount,(function(t){return s("li",{key:t,attrs:{"aria-current":t-1===e.currentPage},on:{click:function(s){return e.goToSlide(t-1)}}},[e._v("⬤")])}))],2)],{goToSlide:e.goToSlide,currentPage:e.currentPage,dotsCount:e.dotsCount})],2)};c._withStripped=!0;const u=a({render:c,staticRenderFns:[]},undefined,d,undefined,false,undefined,!1,void 0,void 0,void 0);const h={props:{tag:{type:String,default:"li"}}};var f=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.tag,{ref:"vsSlide",tag:"component",staticClass:"vs-carousel__slide",attrs:{tabindex:"0"}},[e._t("default")],2)};f._withStripped=!0;const p=a({render:f,staticRenderFns:[]},undefined,h,undefined,false,undefined,!1,void 0,void 0,void 0);var v={install:function(e){e.component("Carousel",u),e.component("Slide",p)}};e.Carousel=u,e.Slide=p,e.default=v,Object.defineProperty(e,"__esModule",{value:!0})}));
